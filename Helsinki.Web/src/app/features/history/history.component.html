<!-- src/app/features/history/history.component.html -->
<div class="bg-white/60 dark:bg-gray-900/60 backdrop-blur-sm border border-gray-100 dark:border-gray-800 rounded-3xl shadow-sm p-8">
  <!-- Header -->
  <div class="flex items-center justify-between mb-8">
    <div class="flex items-center gap-4">
      <div class="h-12 w-12 rounded-2xl bg-gradient-to-br from-orange-500 to-amber-600 flex items-center justify-center shadow-lg">
        <mat-icon class="text-white text-xl">history</mat-icon>
      </div>
      <div>
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Conversion History</h2>
        <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">Your recent currency conversions</p>
      </div>
    </div>
    
    <div class="flex items-center gap-4">
      <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full text-sm font-medium text-gray-700 dark:text-gray-300">
        {{ total() }} total
      </span>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="data().length === 0" 
       class="text-center py-16 px-8 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-2xl">
    <div class="max-w-sm mx-auto">
      <div class="h-16 w-16 rounded-2xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-4">
        <mat-icon class="text-gray-400 dark:text-gray-500">inbox</mat-icon>
      </div>
      <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">No conversions yet</h3>
      <p class="text-gray-600 dark:text-gray-400 text-sm">
        Your conversion history will appear here once you start using the converter.
      </p>
    </div>
  </div>

  <!-- Table -->
  <div *ngIf="data().length > 0" class="space-y-4">
    <!-- Table Container -->
    <div class="overflow-hidden rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800">
      <table mat-table [dataSource]="data()" class="w-full align-middle">

        <!-- Date Column -->
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef 
              class="sticky top-0 bg-gray-50 dark:bg-gray-900 font-semibold text-gray-900 dark:text-white py-4 px-6 border-b border-gray-200 dark:border-gray-700">
            <div class="flex items-center gap-2">
              <mat-icon class="text-lg">calendar_today</mat-icon>
              Date & Time
            </div>
          </th>
          <td mat-cell *matCellDef="let r" 
              class="py-4 px-6 border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800">
            <div class="flex flex-col">
              <span class="font-medium text-gray-900 dark:text-white">{{ r.conversionDate | date:'mediumDate' }}</span>
              <span class="text-xs text-gray-500 dark:text-gray-400">{{ r.conversionDate | date:'shortTime' }}</span>
            </div>
          </td>
        </ng-container>

        <!-- Pair Column -->
        <ng-container matColumnDef="pair">
          <th mat-header-cell *matHeaderCellDef 
              class="sticky top-0 bg-gray-50 dark:bg-gray-900 font-semibold text-gray-900 dark:text-white py-4 px-6 border-b border-gray-200 dark:border-gray-700">
            Currency Pair
          </th>
          <td mat-cell *matCellDef="let r" 
              class="py-4 px-6 border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800">
            <div class="flex items-center gap-2">
              <span class="font-bold text-gray-900 dark:text-white">{{ r.fromCurrency }}</span>
              <mat-icon class="text-gray-400 dark:text-gray-500 text-lg">arrow_forward</mat-icon>
              <span class="font-bold text-gray-900 dark:text-white">{{ r.toCurrency }}</span>
            </div>
          </td>
        </ng-container>

        <!-- Amounts Column -->
        <ng-container matColumnDef="amounts">
          <th mat-header-cell *matHeaderCellDef 
              class="sticky top-0 bg-gray-50 dark:bg-gray-900 font-semibold text-gray-900 dark:text-white py-4 px-6 border-b border-gray-200 dark:border-gray-700 text-right">
            Amount
          </th>
          <td mat-cell *matCellDef="let r" 
              class="py-4 px-6 border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800 text-right">
            <div class="flex flex-col items-end">
              <span class="font-medium text-gray-900 dark:text-white">
                {{ r.fromAmount | number:'1.2-2' }} {{ r.fromCurrency }}
              </span>
              <span class="text-sm text-green-600 dark:text-green-400 font-semibold">
                {{ r.toAmount | number:'1.2-2' }} {{ r.toCurrency }}
              </span>
            </div>
          </td>
        </ng-container>

        <!-- Rate Column -->
        <ng-container matColumnDef="rate">
          <th mat-header-cell *matHeaderCellDef 
              class="sticky top-0 bg-gray-50 dark:bg-gray-900 font-semibold text-gray-900 dark:text-white py-4 px-6 border-b border-gray-200 dark:border-gray-700 text-right">
            Exchange Rate
          </th>
          <td mat-cell *matCellDef="let r" 
              class="py-4 px-6 border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800 text-right">
            <span class="font-medium text-gray-900 dark:text-white">
              {{ r.exchangeRate | number:'1.2-6' }}
            </span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns" 
            class="h-16 text-sm"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
            class="group hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-all duration-200"></tr>
      </table>
    </div>

    <!-- Table Info -->
    <div class="text-sm text-gray-500 dark:text-gray-400 text-center">
      Showing {{ data().length }} of {{ total() }} conversions
    </div>
  </div>

  <!-- Paginator -->
  <mat-paginator
    *ngIf="data().length > 0"
    class="mt-6 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"
    [length]="total()"
    [pageSize]="pageSize"
    [pageSizeOptions]="[5, 10, 15]"
    (page)="page($event)">
  </mat-paginator>
</div>